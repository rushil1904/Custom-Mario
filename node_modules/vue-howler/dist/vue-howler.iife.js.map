{"version":3,"file":"vue-howler.iife.js","sources":["node_modules/object-assign/index.js","node_modules/math-clamp/index.js","node_modules/object-values/index.js","src/index.js"],"sourcesContent":["/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","'use strict';\nmodule.exports = function (x, min, max) {\n\tif (min > max) {\n\t\tthrow new RangeError('`min` should be lower than `max`');\n\t}\n\n\treturn x < min ? min : x > max ? max : x;\n};\n","'use strict';\nmodule.exports = function (obj) {\n\tvar keys = Object.keys(obj);\n\tvar ret = [];\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tret.push(obj[keys[i]]);\n\t}\n\n\treturn ret;\n};\n","import { Howl } from 'howler'\nimport clamp from 'math-clamp'\nimport values from 'object-values'\nimport assign from 'object-assign'\n\nexport default {\n  props: {\n    /**\n     * An array of audio file urls\n     */\n    sources: {\n      type: Array,\n      required: true,\n      validator(sources) {\n        // Every source must be a non-empty string\n        return sources.every(\n          source => typeof source === 'string' && source.length > 0\n        )\n      }\n    },\n    /**\n     * Whether to start the playback\n     * when the component is mounted\n     */\n    autoplay: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Whether to start the playback again\n     * automatically after it is done playing\n     */\n    loop: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * Whether to start downloading the audio\n     * file when the component is mounted\n     */\n    preload: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * Whether to force HTML5 Audio\n     */\n    html5: {\n      type: Boolean,\n      default: false\n    },\n    /**\n    * An array of audio file types\n    */\n    formats: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    /**\n     * Whether to enable the withCredentials flag on XHR\n     * requests used to fetch audio files when using Web Audio API\n     */\n    xhrWithCredentials: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      /**\n       * The Howl instance used for playback\n       */\n      _howl: null,\n      /**\n       * Whether audio is currently playing\n       */\n      playing: false,\n      /**\n       * Whether the audio playback is muted\n       */\n      muted: false,\n      /**\n       * The volume of the playback on a scale of 0 to 1\n       */\n      volume: 1.0,\n      /**\n       * The rate (speed) of the playback on a scale of 0.5 to 4\n       */\n      rate: 1.0,\n      /**\n       * The position of playback in seconds\n       */\n      seek: 0,\n      /**\n       * The duration of the audio in seconds\n       */\n      duration: 0,\n      /**\n       * Functions that poll the Howl instance\n       * to update various data\n       */\n      _polls: {\n        seek: {\n          id: null,\n          interval: 1000 / 4, // 4 times per second (4Hz)\n          hook: () => {\n            this.seek = this.$data._howl.seek()\n          }\n        }\n      },\n      /**\n       * A list of howl events to listen to and\n       * functions to call when they are triggered\n       */\n      _howlEvents: [\n        {\n          name: 'load',\n          hook: () => {\n            this.duration = this.$data._howl.duration()\n          }\n        },\n        'loaderror',\n        'playerror',\n        {\n          name: 'play',\n          hook: () => {\n            this.playing = true\n          }\n        },\n        {\n          name: 'end',\n          hook: () => {\n            this.playing = false\n          }\n        },\n        {\n          name: 'pause',\n          hook: () => {\n            this.playing = false\n          }\n        },\n        {\n          name: 'stop',\n          hook: () => {\n            this.playing = false\n            if (this.$data._howl != null) {\n              this.seek = this.$data._howl.seek()\n            }\n          }\n        },\n        'mute',\n        {\n          name: 'volume',\n          hook: () => {\n            this.volume = this.$data._howl.volume()\n          }\n        },\n        {\n          name: 'rate',\n          hook: () => {\n            this.rate = this.$data._howl.rate()\n          }\n        },\n        {\n          name: 'seek',\n          hook: () => {\n            this.seek = this.$data._howl.seek()\n          }\n        },\n        'fade'\n      ]\n    }\n  },\n\n  computed: {\n    /**\n     * The progress of the playback on a scale of 0 to 1\n     */\n    progress() {\n      if (this.duration === 0) return 0\n      return this.seek / this.duration\n    }\n  },\n\n  created() {\n    this._initialize()\n  },\n\n  beforeDestroy() {\n    this._cleanup()\n  },\n\n  watch: {\n    playing(playing) {\n      // Update the seek\n      this.seek = this.$data._howl.seek()\n\n      if (playing) {\n        // Start the seek poll\n        this.$data._polls.seek.id = setInterval(\n          this.$data._polls.seek.hook,\n          this.$data._polls.seek.interval\n        )\n      } else {\n        // Stop the seek poll\n        clearInterval(this.$data._polls.seek.id)\n      }\n    },\n\n    sources(sources) {\n      this._reinitialize()\n    }\n  },\n\n  methods: {\n    /**\n     * Reinitialize the Howler player\n     */\n    _reinitialize() {\n      this._cleanup(false)\n      this._initialize()\n    },\n    /**\n     * Initialize the Howler player\n     */\n    _initialize() {\n      this.$data._howl = new Howl({\n        src: this.sources,\n        volume: this.volume,\n        html5: this.html5,\n        loop: this.loop,\n        preload: this.preload,\n        autoplay: this.autoplay,\n        mute: this.muted,\n        rate: this.rate,\n        format: this.formats,\n        xhrWithCredentials: this.xhrWithCredentials\n      })\n\n      const duration = this.$data._howl.duration()\n      this.duration = duration\n\n      if (duration > 0) {\n        // The audio file(s) have been cached. Howler won't\n        // emit a load event, so we will do this manually\n        this.$emit('load')\n      }\n\n      // Bind to all Howl events\n      this.$data._howlEvents = this.$data._howlEvents.map(event => {\n        // Normalize string shorthands to objects\n        if (typeof event === 'string') {\n          event = { name: event }\n        }\n\n        // Create a handler\n        const handler = (id, details) => {\n          if (typeof event.hook === 'function') event.hook(id, details)\n          this.$emit(event.name, id, details)\n        }\n\n        // Bind the handler\n        this.$data._howl.on(event.name, handler)\n\n        // Return the name and handler to unbind later\n        return assign({}, event, { handler })\n      })\n    },\n    /**\n     * Clean up the Howler player\n     */\n    _cleanup(resetSettings = true) {\n      // Stop all playback\n      if (this.$data._howl) {\n        this.stop()\n      }\n\n      // Stop all polls\n      values(this.$data._polls).forEach(poll => {\n        if (poll.id != null) clearInterval(poll.id)\n      })\n\n      // Clear all event listeners\n      this.$data._howlEvents.map(event => {\n        if (event.handler) {\n          if (this.$data._howl) {\n            this.$data._howl.off(event.name, event.handler)\n          }\n\n          const _event = assign({}, event)\n          delete _event.handler\n          return _event\n        }\n\n        return event\n      })\n\n      // Destroy the Howl instance\n      this.$data._howl = null\n\n      this.duration = 0\n\n      if (resetSettings) {\n        this.muted = false\n        this.volume = 1.0\n        this.rate = 1.0\n      }\n    },\n    /**\n     * Start the playback\n     */\n    play() {\n      if (!this.playing) this.$data._howl.play()\n    },\n    /**\n     * Pause the playback\n     */\n    pause() {\n      if (this.playing) this.$data._howl.pause()\n    },\n    /**\n     * Toggle playing or pausing the playback\n     */\n    togglePlayback() {\n      if (!this.playing) {\n        this.$data._howl.play()\n      } else {\n        this.$data._howl.pause()\n      }\n    },\n    /**\n     * Stop the playback (also resets the seek to 0)\n     */\n    stop() {\n      this.$data._howl.stop()\n    },\n    /**\n     * Mute the playback\n     */\n    mute() {\n      this.$data._howl.mute(true)\n      this.muted = true\n    },\n    /**\n     * Unmute the playback\n     */\n    unmute() {\n      this.$data._howl.mute(false)\n      this.muted = false\n    },\n    /**\n     * Toggle muting and unmuting the playback\n     */\n    toggleMute() {\n      this.$data._howl.mute(!this.muted)\n      this.muted = !this.muted\n    },\n    /**\n     * Set the volume of the playback\n     * @param {Number} volume - The new volume.\n     * The value is clamped between 0 and 1\n     */\n    setVolume(volume) {\n      if (typeof volume !== 'number') {\n        throw new Error(\n          `volume must be a number, got a ${typeof volume} instead`\n        )\n      }\n\n      this.$data._howl.volume(clamp(volume, 0, 1))\n    },\n    /**\n     * Set the rate (speed) of the playback\n     * @param {Number} rate - The new rate.\n     * The value is clamped between 0.5 and 4\n     */\n    setRate(rate) {\n      if (typeof rate !== 'number') {\n        throw new Error(`rate must be a number, got a ${typeof rate} instead`)\n      }\n\n      this.$data._howl.rate(clamp(rate, 0.5, 4))\n    },\n    /**\n     * Set the position of the playback\n     * @param {Number} seek - The new position in seconds.\n     * The value is clamped between 0 and the duration\n     */\n    setSeek(seek) {\n      if (typeof seek !== 'number') {\n        throw new Error(`seek must be a number, got a ${typeof seek} instead`)\n      }\n\n      this.$data._howl.seek(clamp(seek, 0, this.duration))\n    },\n    /**\n     * Set the progress of the playback\n     * @param {Number} progress - The new progress.\n     * The value is clamped between 0 and 1\n     */\n    setProgress(progress) {\n      if (typeof progress !== 'number') {\n        throw new Error(\n          `progress must be a number, got a ${typeof progress} instead`\n        )\n      }\n\n      this.setSeek(clamp(progress, 0, 1) * this.duration)\n    }\n  }\n}\n"],"names":["toObject","val","undefined","TypeError","Object","x","min","max","RangeError","obj","keys","ret","i","length","push","getOwnPropertySymbols","hasOwnProperty","prototype","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","n","join","test3","split","forEach","letter","err","shouldUseNative","target","source","from","symbols","to","s","arguments","key","call","Array","sources","every","Boolean","seek","_this","$data","_howl","duration","playing","volume","rate","this","_initialize","_cleanup","_polls","id","setInterval","hook","interval","_reinitialize","Howl","html5","loop","preload","autoplay","muted","formats","xhrWithCredentials","$emit","_howlEvents","event","name","handler","details","on","resetSettings","stop","poll","clearInterval","_this3","off","_event","play","pause","mute","Error","clamp","progress","setSeek"],"mappings":"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"}